#ifndef _GROWATT_1_25_H_
#define _GROWATT_1_25_H_

#include "Arduino.h"
#include "GrowattTypes.h"

// Growatt modbus protocol version 1.25 (based on 1.24 with added support for export limiting and extended telemetry)
typedef enum {
    // Status and core measurements
    P125_I_STATUS = 0,
    P125_INPUT_POWER,
    P125_PV1_VOLTAGE, P125_PV1_CURRENT, P125_PV1_POWER,
    P125_PV2_VOLTAGE, P125_PV2_CURRENT, P125_PV2_POWER,
    P125_PAC, P125_FAC,
    P125_VAC1, P125_IAC1, P125_PAC1,
    P125_VAC2, P125_IAC2, P125_PAC2,
    P125_VAC3, P125_IAC3, P125_PAC3,
    P125_VAC_RS, P125_VAC_ST, P125_VAC_TR,
    P125_EAC_TODAY, P125_EAC_TOTAL,
    P125_TIME_TOTAL,
    P125_EPV1_TODAY, P125_EPV1_TOTAL,
    P125_EPV2_TODAY, P125_EPV2_TOTAL,
    P125_EPV_TOTAL,
    P125_TEMP1, P125_TEMP2, P125_TEMP3, P125_TEMP4,
    P125_BUS_VOLT_P, P125_BUS_VOLT_N,
    P125_PF, P125_OUTPUT_PERCENT,
    P125_OUTPUT_LIMIT_POWER,
    P125_DERATE_REASON,
    P125_FAULT_CODE, P125_FAULT_MASK_HIGH, P125_FAULT_MASK_LOW,
    P125_WARNING_MASK_HIGH, P125_WARNING_MASK_LOW,
    
    // Export limiting and reactive power
    P125_EXPORT_LIMIT_ENABLED,
    P125_EXPORT_LIMIT_PERCENT,
    P125_REACTIVE_POWER_MODE,
    P125_PF_COMMAND,
    
    // Grid support functions
    P125_VOLTAGE_TRIP_OV,
    P125_VOLTAGE_TRIP_UV,
    P125_FREQ_TRIP_OF,
    P125_FREQ_TRIP_UF,
    P125_VOLTAGE_RECONNECT,
    P125_FREQ_RECONNECT,
    P125_START_DELAY,
    P125_RECONNECT_DELAY,
    P125_RAMP_UP_RATE,
    P125_RAMP_DOWN_RATE,

    // Battery-related (if hybrid)
    P125_PDISCHARGE, P125_PCHARGE, P125_VBAT, P125_SOC,
    P125_PAC_TO_USER, P125_PAC_TO_USER_TOTAL,
    P125_PAC_TO_GRID, P125_PAC_TO_GRID_TOTAL,
    P125_PLOCAL_LOAD, P125_PLOCAL_LOAD_TOTAL,
    P125_BATTERY_TEMPERATURE,
    P125_BATTERY_STATE,
    P125_ETOUSER_TODAY, P125_ETOUSER_TOTAL,
    P125_ETOGRID_TODAY, P125_ETOGRID_TOTAL,
    P125_EDISCHARGE_TODAY, P125_EDISCHARGE_TOTAL,
    P125_ECHARGE_TODAY, P125_ECHARGE_TOTAL,
    P125_ETOLOCALLOAD_TODAY, P125_ETOLOCALLOAD_TOTAL,
} eP125InputRegisters_t;

void init_growatt125(sProtocolDefinition_t &Protocol);

#endif // _GROWATT_1_25_H_
